<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CareerCompass - Find Your Ideal Career Path</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
  <style>
    :root {
      /* Professional color palette */
      --primary: #4f46e5;
      --primary-dark: #4338ca;
      --primary-light: #818cf8;
      --primary-bg: #eef2ff;
      --secondary: #0ea5e9;
      --accent: #f59e0b;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --background: #ffffff;
      --foreground: #1f2937;
      --muted: #f3f4f6;
      --muted-foreground: #6b7280;
      --border: #e5e7eb;
      --card: #ffffff;
      --card-foreground: #1f2937;
      --radius: 0.5rem;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --transition: all 0.2s ease-in-out;
    }

    .dark {
      --primary: #818cf8;
      --primary-dark: #6366f1;
      --primary-light: #a5b4fc;
      --primary-bg: #1e1b4b;
      --background: #111827;
      --foreground: #f9fafb;
      --muted: #1f2937;
      --muted-foreground: #9ca3af;
      --border: #374151;
      --card: #1f2937;
      --card-foreground: #f9fafb;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--background);
      color: var(--foreground);
      line-height: 1.5;
      transition: var(--transition);
    }

    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    /* Header */
    header {
      position: sticky;
      top: 0;
      z-index: 50;
      width: 100%;
      border-bottom: 1px solid var(--border);
      background-color: var(--background);
      backdrop-filter: blur(8px);
    }

    .header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      height: 4rem;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 700;
      font-size: 1.25rem;
    }

    .logo-icon {
      background-color: var(--primary);
      color: white;
      width: 2rem;
      height: 2rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Theme Toggle */
    .theme-toggle {
      background-color: var(--muted);
      border: 1px solid var(--border);
      color: var(--foreground);
      width: 2.5rem;
      height: 2.5rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition);
    }

    .theme-toggle:hover {
      background-color: var(--primary-bg);
    }

    /* Main Content */
    main {
      padding: 2rem 0;
    }

    /* Tabs */
    .tabs {
      max-width: 800px;
      margin: 0 auto;
    }

    .tab-list {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 0.5rem;
      margin-bottom: 1rem;
      border-radius: var(--radius);
      background-color: var(--muted);
      padding: 0.25rem;
    }

    .tab-trigger {
      padding: 0.75rem 1rem;
      text-align: center;
      font-weight: 500;
      border-radius: var(--radius);
      cursor: pointer;
      transition: var(--transition);
      border: none;
      background: transparent;
      color: var(--foreground);
    }

    .tab-trigger.active {
      background-color: var(--card);
      box-shadow: var(--shadow);
    }

    .tab-trigger:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .tab-content {
      display: none;
      animation: fadeIn 0.3s ease-in-out;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Cards */
    .card {
      background-color: var(--card);
      color: var(--card-foreground);
      border-radius: var(--radius);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      overflow: hidden;
      transition: var(--transition);
    }

    .card:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-2px);
    }

    .card-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
    }

    .card-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .card-description {
      color: var(--muted-foreground);
      font-size: 0.875rem;
    }

    .card-content {
      padding: 1.5rem;
    }

    .card-footer {
      padding: 1.5rem;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
    }

    /* Welcome Screen */
    .welcome-screen {
      text-align: center;
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem 0;
    }

    .welcome-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 3rem;
      height: 3rem;
      background-color: var(--primary-bg);
      color: var(--primary);
      border-radius: 50%;
      margin-bottom: 1rem;
    }

    .welcome-title {
      font-size: 2.25rem;
      font-weight: 700;
      margin-bottom: 1rem;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .welcome-description {
      font-size: 1.25rem;
      color: var(--muted-foreground);
      max-width: 600px;
      margin: 0 auto 2rem;
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(1, 1fr);
      gap: 1rem;
      margin-top: 3rem;
    }

    @media (min-width: 768px) {
      .feature-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    .feature-card {
      text-align: left;
      padding: 1.5rem;
    }

    .feature-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 2.5rem;
      height: 2.5rem;
      background-color: var(--primary-bg);
      color: var(--primary);
      border-radius: 50%;
      margin-bottom: 1rem;
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 1.5rem;
    }

    label {
      display: block;
      font-weight: 500;
      margin-bottom: 0.5rem;
    }

    input, textarea {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background-color: var(--background);
      color: var(--foreground);
      font-family: inherit;
      transition: var(--transition);
    }

    input:focus, textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 2px var(--primary-light);
    }

    textarea {
      min-height: 100px;
      resize: vertical;
    }

    .slider-container {
      background-color: var(--muted);
      padding: 1rem;
      border-radius: var(--radius);
      margin-bottom: 1rem;
    }

    .slider-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }

    .slider {
      width: 100%;
      height: 0.5rem;
      background-color: var(--border);
      border-radius: 1rem;
      position: relative;
      margin: 1rem 0;
    }

    .slider-fill {
      position: absolute;
      height: 100%;
      background-color: var(--primary);
      border-radius: 1rem;
      transition: var(--transition);
    }

    .slider-thumb {
      position: absolute;
      width: 1.25rem;
      height: 1.25rem;
      background-color: var(--primary);
      border-radius: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      cursor: pointer;
      box-shadow: 0 0 0 4px var(--background);
      transition: var(--transition);
    }

    .slider-thumb:hover {
      transform: translate(-50%, -50%) scale(1.1);
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.5rem 1rem;
      font-weight: 500;
      border-radius: var(--radius);
      cursor: pointer;
      transition: var(--transition);
      border: none;
      gap: 0.5rem;
    }

    .btn-primary {
      background-color: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background-color: var(--primary-dark);
    }

    .btn-outline {
      background-color: transparent;
      border: 1px solid var(--border);
      color: var(--foreground);
    }

    .btn-outline:hover {
      background-color: var(--muted);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-lg {
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
    }

    /* Progress */
    .progress-container {
      margin-top: 1rem;
    }

    .progress {
      height: 0.5rem;
      background-color: var(--muted);
      border-radius: 1rem;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background-color: var(--primary);
      border-radius: 1rem;
      transition: width 0.3s ease;
    }

    .progress-text {
      text-align: center;
      font-size: 0.75rem;
      color: var(--muted-foreground);
      margin-top: 0.5rem;
    }

    /* Results */
    .results-container {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .result-card {
      border: 2px solid var(--border);
      transition: var(--transition);
    }

    .result-card:hover {
      border-color: var(--primary-light);
    }

    .result-header {
      background-color: var(--primary-bg);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      padding: 0.25rem 0.75rem;
      font-size: 0.75rem;
      font-weight: 500;
      border-radius: 9999px;
      background-color: var(--muted);
      color: var(--muted-foreground);
      border: 1px solid var(--border);
    }

    .result-content {
      padding-top: 1.5rem;
    }

    .result-section {
      margin-bottom: 1.5rem;
    }

    .result-section-title {
      font-weight: 500;
      margin-bottom: 0.5rem;
    }

    .skill-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }

    .skill-tag {
      display: inline-flex;
      align-items: center;
      padding: 0.25rem 0.75rem;
      font-size: 0.75rem;
      font-weight: 500;
      border-radius: 9999px;
    }

    .skill-tag-hard {
      background-color: var(--primary-bg);
      color: var(--primary);
    }

    .skill-tag-soft {
      background-color: var(--muted);
      color: var(--muted-foreground);
      border: 1px solid var(--border);
    }

    .salary-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.75rem;
    }

    .salary-card {
      background-color: var(--muted);
      padding: 1rem;
      border-radius: var(--radius);
      text-align: center;
    }

    .salary-label {
      font-size: 0.75rem;
      color: var(--muted-foreground);
      margin-bottom: 0.25rem;
    }

    .salary-value {
      font-weight: 600;
      font-size: 1.125rem;
    }

    .resources-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    @media (min-width: 768px) {
      .resources-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .resources-box {
      background-color: var(--muted);
      padding: 1rem;
      border-radius: var(--radius);
    }

    .resources-title {
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
    }

    .resources-list {
      list-style-type: none;
    }

    .resources-list li {
      position: relative;
      padding-left: 1rem;
      margin-bottom: 0.25rem;
      font-size: 0.875rem;
    }

    .resources-list li::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0.6rem;
      width: 0.375rem;
      height: 0.375rem;
      border-radius: 50%;
      background-color: var(--primary);
    }

    /* Toast */
    .toast-container {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      z-index: 100;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .toast {
      background-color: var(--card);
      color: var(--card-foreground);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1rem;
      box-shadow: var(--shadow-lg);
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      width: 100%;
      max-width: 24rem;
      animation: slideIn 0.3s ease-out;
    }

    .toast.success {
      border-left: 4px solid var(--success);
    }

    .toast.error {
      border-left: 4px solid var(--danger);
    }

    .toast-icon {
      flex-shrink: 0;
      width: 1.5rem;
      height: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .toast-content {
      flex: 1;
    }

    .toast-title {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .toast-message {
      font-size: 0.875rem;
      color: var(--muted-foreground);
    }

    .toast-close {
      background: transparent;
      border: none;
      color: var(--muted-foreground);
      cursor: pointer;
      padding: 0.25rem;
      border-radius: 0.25rem;
      transition: var(--transition);
    }

    .toast-close:hover {
      background-color: var(--muted);
      color: var(--foreground);
    }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes slideOut {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }

    /* Footer */
    footer {
      border-top: 1px solid var(--border);
      background-color: var(--muted);
      padding: 3rem 0;
      margin-top: 3rem;
    }

    .footer-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    @media (min-width: 768px) {
      .footer-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    .footer-heading {
      font-size: 0.875rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    .footer-links {
      list-style-type: none;
    }

    .footer-links li {
      margin-bottom: 0.5rem;
    }

    .footer-links a {
      color: var(--muted-foreground);
      text-decoration: none;
      font-size: 0.875rem;
      transition: var(--transition);
    }

    .footer-links a:hover {
      color: var(--foreground);
    }

    .footer-bottom {
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      gap: 1rem;
      align-items: center;
    }

    @media (min-width: 768px) {
      .footer-bottom {
        flex-direction: row;
        justify-content: space-between;
      }
    }

    .footer-copyright {
      font-size: 0.75rem;
      color: var(--muted-foreground);
    }

    .social-links {
      display: flex;
      gap: 1rem;
    }

    .social-link {
      color: var(--muted-foreground);
      transition: var(--transition);
    }

    .social-link:hover {
      color: var(--foreground);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .card-footer {
        flex-direction: column;
        gap: 1rem;
      }

      .btn {
        width: 100%;
      }
    }

    /* Loading Spinner */
    .spinner {
      display: inline-block;
      width: 1rem;
      height: 1rem;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Error Message */
    .error-message {
      background-color: rgba(239, 68, 68, 0.1);
      color: var(--danger);
      padding: 0.75rem;
      border-radius: var(--radius);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    /* NEW STYLES FOR LEARNING PATH EXPLORER */
    
    /* Expandable Card Styles */
    .result-card {
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    /* Indicator for expandable content */
    .expand-indicator {
      position: absolute;
      right: 1rem;
      bottom: 1rem;
      width: 2rem;
      height: 2rem;
      background-color: var(--primary-bg);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
      transition: transform 0.3s ease;
      z-index: 2;
    }
    
    .result-card.expanded .expand-indicator {
      transform: rotate(180deg);
    }
    
    /* Learning Path Container */
    .learning-path-container {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease;
      background-color: var(--card);
      border-top: 1px solid var(--border);
    }
    
    .result-card.expanded .learning-path-container {
      max-height: 2000px; /* Large enough to accommodate content */
    }
    
    .learning-path-content {
      padding: 1.5rem;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.3s ease, transform 0.3s ease;
      transition-delay: 0.2s;
    }
    
    .result-card.expanded .learning-path-content {
      opacity: 1;
      transform: translateY(0);
    }
    
    /* Learning Path Header */
    .learning-path-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border);
    }
    
    .learning-path-title {
      font-size: 1.25rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--primary);
    }
    
    /* Progress Tracker */
    .progress-tracker {
      background-color: var(--primary-bg);
      border-radius: var(--radius);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    .progress-tracker-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .progress-tracker-title {
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .progress-percentage {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--primary);
    }
    
    .progress-bar-container {
      height: 0.75rem;
      background-color: var(--background);
      border-radius: 1rem;
      overflow: hidden;
      margin-bottom: 0.5rem;
    }
    
    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      border-radius: 1rem;
      transition: width 1s ease;
    }
    
    .progress-stats {
      display: flex;
      justify-content: space-between;
      font-size: 0.75rem;
      color: var(--muted-foreground);
    }
    
    /* Learning Path Steps */
    .learning-path-steps {
      margin-bottom: 1.5rem;
    }
    
    .step-list {
      position: relative;
      padding-left: 1.5rem;
    }
    
    .step-list::before {
      content: "";
      position: absolute;
      left: 0.35rem;
      top: 0;
      bottom: 0;
      width: 2px;
      background-color: var(--border);
      z-index: 1;
    }
    
    .step-item {
      position: relative;
      padding-bottom: 1.5rem;
    }
    
    .step-item:last-child {
      padding-bottom: 0;
    }
    
    .step-marker {
      position: absolute;
      left: -1.5rem;
      top: 0;
      width: 1rem;
      height: 1rem;
      border-radius: 50%;
      background-color: var(--muted);
      border: 2px solid var(--border);
      z-index: 2;
    }
    
    .step-item.completed .step-marker {
      background-color: var(--success);
      border-color: var(--success);
    }
    
    .step-item.active .step-marker {
      background-color: var(--primary);
      border-color: var(--primary);
      box-shadow: 0 0 0 4px var(--primary-bg);
    }
    
    .step-content {
      background-color: var(--background);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1rem;
      margin-bottom: 0.5rem;
    }
    
    .step-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    
    .step-title {
      font-weight: 600;
    }
    
    .step-status {
      font-size: 0.75rem;
      padding: 0.25rem 0.5rem;
      border-radius: 1rem;
    }
    
    .step-status.completed {
      background-color: rgba(16, 185, 129, 0.1);
      color: var(--success);
    }
    
    .step-status.in-progress {
      background-color: var(--primary-bg);
      color: var(--primary);
    }
    
    .step-status.pending {
      background-color: var(--muted);
      color: var(--muted-foreground);
    }
    
    .step-description {
      font-size: 0.875rem;
      color: var(--muted-foreground);
      margin-bottom: 0.75rem;
    }
    
    .step-resources {
      background-color: var(--muted);
      border-radius: var(--radius);
      padding: 0.75rem;
      font-size: 0.875rem;
    }
    
    .resource-list {
      list-style-type: none;
      margin-top: 0.5rem;
    }
    
    .resource-item {
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }
    
    .resource-item:last-child {
      margin-bottom: 0;
    }
    
    .resource-icon {
      flex-shrink: 0;
      margin-top: 0.25rem;
    }
    
    .resource-link {
      color: var(--primary);
      text-decoration: none;
      transition: var(--transition);
    }
    
    .resource-link:hover {
      text-decoration: underline;
    }
    
    .resource-tag {
      font-size: 0.7rem;
      padding: 0.1rem 0.4rem;
      border-radius: 0.25rem;
      margin-left: 0.5rem;
    }
    
    .resource-tag.free {
      background-color: rgba(16, 185, 129, 0.1);
      color: var(--success);
    }
    
    .resource-tag.paid {
      background-color: rgba(245, 158, 11, 0.1);
      color: var(--warning);
    }
    
    /* Milestones Section */
    .milestones-section {
      margin-top: 2rem;
    }
    
    .milestone-grid {
      display: grid;
      grid-template-columns: repeat(1, 1fr);
      gap: 1rem;
    }
    
    @media (min-width: 640px) {
      .milestone-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    .milestone-card {
      background-color: var(--background);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1rem;
      position: relative;
      overflow: hidden;
    }
    
    .milestone-card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 0.25rem;
      height: 100%;
      background-color: var(--primary);
    }
    
    .milestone-title {
      font-weight: 600;
      margin-bottom: 0.5rem;
      padding-left: 0.5rem;
    }
    
    .milestone-description {
      font-size: 0.875rem;
      color: var(--muted-foreground);
      padding-left: 0.5rem;
    }
    
    /* Loading State */
    .learning-path-loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 3rem 1.5rem;
      text-align: center;
    }
    
    .loading-spinner {
      width: 2.5rem;
      height: 2.5rem;
      border: 3px solid var(--primary-bg);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s linear infinite;
      margin-bottom: 1rem;
    }
    
    .loading-text {
      font-size: 0.875rem;
      color: var(--muted-foreground);
    }
    
    /* Error State */
    .learning-path-error {
      background-color: rgba(239, 68, 68, 0.1);
      border-radius: var(--radius);
      padding: 1.5rem;
      text-align: center;
      color: var(--danger);
    }
    
    .error-icon {
      font-size: 2rem;
      margin-bottom: 1rem;
    }
    
    .error-message {
      margin-bottom: 1rem;
    }
    
    /* Responsive Adjustments */
    @media (max-width: 640px) {
      .learning-path-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }
      
      .progress-tracker-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container header-container">
      <div class="logo">
        <div class="logo-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6H5a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h13l4-3.5L18 6Z"></path>
            <path d="M12 13v8"></path>
            <path d="M12 3v3"></path>
          </svg>
        </div>
        <span>CareerCompass</span>
      </div>
      <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sun-icon">
          <circle cx="12" cy="12" r="4"></circle>
          <path d="M12 2v2"></path>
          <path d="M12 20v2"></path>
          <path d="m4.93 4.93 1.41 1.41"></path>
          <path d="m17.66 17.66 1.41 1.41"></path>
          <path d="M2 12h2"></path>
          <path d="M20 12h2"></path>
          <path d="m6.34 17.66-1.41 1.41"></path>
          <path d="m19.07 4.93-1.41 1.41"></path>
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="moon-icon" style="display: none;">
          <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
        </svg>
      </button>
    </div>
  </header>

  <main>
    <div class="container">
      <div class="tabs" id="tabs">
        <div class="tab-list">
          <button class="tab-trigger active" data-tab="welcome">Welcome</button>
          <button class="tab-trigger" data-tab="setup">API Setup</button>
          <button class="tab-trigger" data-tab="questionnaire">Questionnaire</button>
          <button class="tab-trigger" data-tab="results" disabled>Results</button>
        </div>

        <div class="tab-content active" id="welcome-tab">
          <div class="welcome-screen">
            <div class="welcome-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect width="20" height="14" x="2" y="7" rx="2" ry="2"></rect>
                <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
              </svg>
            </div>
            <h1 class="welcome-title">Discover Your Ideal Career Path</h1>
            <p class="welcome-description">Get personalized career recommendations based on your unique skills, interests, and academic strengths.</p>
            <button class="btn btn-primary btn-lg" id="get-started-btn">
              Get Started
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14"></path>
                <path d="m12 5 7 7-7 7"></path>
              </svg>
            </button>

            <div class="feature-grid">
              <div class="card feature-card">
                <div class="feature-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 16v-4"></path>
                    <path d="M12 8h.01"></path>
                  </svg>
                </div>
                <h3 class="card-title">AI-Powered Analysis</h3>
                <p class="card-description">Our tool uses advanced AI to analyze your profile and match you with suitable career paths.</p>
              </div>
              <div class="card feature-card">
                <div class="feature-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2v8"></path>
                    <path d="m4.93 10.93 1.41 1.41"></path>
                    <path d="M2 18h2"></path>
                    <path d="M20 18h2"></path>
                    <path d="m19.07 10.93-1.41 1.41"></path>
                    <path d="M22 22H2"></path>
                    <path d="m16 6-4 4-4-4"></path>
                    <path d="M16 18a4 4 0 0 0 0-8H8a4 4 0 0 0 0 8"></path>
                  </svg>
                </div>
                <h3 class="card-title">Personalized Insights</h3>
                <p class="card-description">Get tailored recommendations based on your unique combination of skills and interests.</p>
              </div>
              <div class="card feature-card">
                <div class="feature-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
                    <path d="M6 12v5c3 3 9 3 12 0v-5"></path>
                  </svg>
                </div>
                <h3 class="card-title">Learning Resources</h3>
                <p class="card-description">Discover the best resources to help you develop the skills needed for your ideal career.</p>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-content" id="setup-tab">
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L21 3m0 0l-6 6"></path>
                </svg>
                Set Up Gemini API
              </div>
              <div class="card-description">
                You'll need a Gemini API key to use this tool. Follow these steps to get one:
              </div>
            </div>
            <div class="card-content">
              <div class="card" style="margin-bottom: 1.5rem;">
                <div class="card-content">
                  <ol style="padding-left: 1.5rem;">
                    <li style="margin-bottom: 0.75rem;">
                      <span style="font-weight: 500;">Visit Google AI Studio:</span> Go to <a href="https://ai.google.dev/" target="_blank" rel="noopener noreferrer" style="color: var(--primary);">Google AI Studio</a>
                    </li>
                    <li style="margin-bottom: 0.75rem;">
                      <span style="font-weight: 500;">Sign in:</span> Use your Google account to sign in
                    </li>
                    <li style="margin-bottom: 0.75rem;">
                      <span style="font-weight: 500;">Get API key:</span> Navigate to the API keys section and create a new key
                    </li>
                    <li style="margin-bottom: 0.75rem;">
                      <span style="font-weight: 500;">Copy key:</span> Copy your new API key
                    </li>
                  </ol>
                </div>
              </div>
              <div class="form-group">
                <label for="api-key">Gemini API Key</label>
                <input type="password" id="api-key" placeholder="Enter your Gemini API key">
                <p style="font-size: 0.75rem; color: var(--muted-foreground); margin-top: 0.5rem;">
                  Your API key is stored only in your browser and is never sent to our servers.
                </p>
              </div>
            </div>
            <div class="card-footer">
              <button class="btn btn-outline" id="setup-back-btn">
                Back
              </button>
              <button class="btn btn-primary" id="setup-continue-btn">
                Continue
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M5 12h14"></path>
                  <path d="m12 5 7 7-7 7"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <div class="tab-content" id="questionnaire-tab">
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5"></path>
                  <path d="M8.5 8.5v.01"></path>
                  <path d="M16 15.5v.01"></path>
                  <path d="M12 12v.01"></path>
                  <path d="M11 17v.01"></path>
                  <path d="M7 14v.01"></path>
                </svg>
                Career Questionnaire
              </div>
              <div class="card-description">
                Tell us about your skills, interests, and academic strengths to get personalized career suggestions.
              </div>
            </div>
            <div class="card-content">
              <div class="form-group">
                <label for="skills">Skills</label>
                <textarea id="skills" placeholder="List your technical and soft skills (e.g., programming languages, problem-solving, communication)"></textarea>
              </div>
              
              <div class="form-group">
                <label>Rate your skills (0-100)</label>
                
                <div class="slider-container">
                  <div class="slider-header">
                    <span>Analytical Thinking</span>
                    <span id="analytical-value">50</span>
                  </div>
                  <div class="slider" id="analytical-slider">
                    <div class="slider-fill" style="width: 50%"></div>
                    <div class="slider-thumb" style="left: 50%"></div>
                  </div>
                </div>
                
                <div class="slider-container">
                  <div class="slider-header">
                    <span>Teamwork</span>
                    <span id="teamwork-value">50</span>
                  </div>
                  <div class="slider" id="teamwork-slider">
                    <div class="slider-fill" style="width: 50%"></div>
                    <div class="slider-thumb" style="left: 50%"></div>
                  </div>
                </div>
                
                <div class="slider-container">
                  <div class="slider-header">
                    <span>Technical Aptitude</span>
                    <span id="technical-value">50</span>
                  </div>
                  <div class="slider" id="technical-slider">
                    <div class="slider-fill" style="width: 50%"></div>
                    <div class="slider-thumb" style="left: 50%"></div>
                  </div>
                </div>
              </div>
              
              <div class="form-group">
                <label for="interests">Interests</label>
                <textarea id="interests" placeholder="What topics, industries, or activities interest you? (e.g., AI, healthcare, game development)"></textarea>
              </div>
              
              <div class="form-group">
                <label for="academics">Academic Strengths</label>
                <textarea id="academics" placeholder="What subjects are you good at? (e.g., mathematics, computer science, physics)"></textarea>
              </div>
              
              <div id="error-container"></div>
            </div>
            <div class="card-footer">
              <button class="btn btn-outline" id="questionnaire-back-btn">
                Back
              </button>
              <button class="btn btn-primary" id="submit-btn">
                Get Career Suggestions
              </button>
            </div>
            <div id="progress-container" class="progress-container" style="display: none; padding: 0 1.5rem 1.5rem;">
              <div class="progress">
                <div class="progress-bar" id="progress-bar" style="width: 0%"></div>
              </div>
              <div class="progress-text">
                Analyzing your profile and generating personalized recommendations...
              </div>
            </div>
          </div>
        </div>

        <div class="tab-content" id="results-tab">
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                  <path d="m9 11 3 3L22 4"></path>
                </svg>
                Your Career Matches
              </div>
              <div class="card-description">
                Based on your profile, we've identified these career paths that align with your skills and interests.
                <strong>Click on any career card to explore a detailed learning path.</strong>
              </div>
            </div>
            <div class="card-content">
              <div class="results-container" id="results-container">
                <!-- Results will be dynamically inserted here -->
              </div>
            </div>
            <div class="card-footer">
              <button class="btn btn-outline" id="results-back-btn">
                Back to Questionnaire
              </button>
              <button class="btn btn-primary" id="save-results-btn">
                Save Results
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <div class="container">
      <div class="footer-grid">
        <div>
          <div class="logo" style="margin-bottom: 1rem;">
            <div class="logo-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 6H5a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h13l4-3.5L18 6Z"></path>
                <path d="M12 13v8"></path>
                <path d="M12 3v3"></path>
              </svg>
            </div>
            <span>CareerCompass</span>
          </div>
          <p style="color: var(--muted-foreground); font-size: 0.875rem;">
            Guiding students toward fulfilling career paths through personalized AI-powered recommendations.
          </p>
        </div>
        <div>
          <h3 class="footer-heading">Resources</h3>
          <ul class="footer-links">
            <li><a href="#">Career Blog</a></li>
            <li><a href="#">Industry Insights</a></li>
            <li><a href="#">Learning Paths</a></li>
          </ul>
        </div>
        <div>
          <h3 class="footer-heading">Legal</h3>
          <ul class="footer-links">
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Terms of Service</a></li>
            <li><a href="#">Cookie Policy</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p class="footer-copyright">
          Â© <span id="current-year"></span> CareerCompass. All rights reserved.
        </p>
        <div class="social-links">
          <a href="#" class="social-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path>
            </svg>
          </a>
          <a href="#" class="social-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
              <rect width="4" height="12" x="2" y="9"></rect>
              <circle cx="4" cy="4" r="2"></circle>
            </svg>
          </a>
          <a href="#" class="social-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path>
              <path d="M9 18c-4.51 2-5-2-7-2"></path>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </footer>

  <div class="toast-container" id="toast-container">
    <!-- Toasts will be dynamically inserted here -->
  </div>

  <script>
    // Theme Toggle
    const themeToggle = document.getElementById('theme-toggle');
    const sunIcon = document.querySelector('.sun-icon');
    const moonIcon = document.querySelector('.moon-icon');
    
    // Check for saved theme preference or use system preference
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.body.classList.add('dark');
      sunIcon.style.display = 'none';
      moonIcon.style.display = 'block';
    }
    
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      const isDark = document.body.classList.contains('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      
      if (isDark) {
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
      } else {
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
      }
    });
    
    // Tabs
    const tabs = document.getElementById('tabs');
    const tabTriggers = tabs.querySelectorAll('.tab-trigger');
    const tabContents = tabs.querySelectorAll('.tab-content');
    
    function setActiveTab(tabId) {
      // Deactivate all tabs
      tabTriggers.forEach(trigger => {
        trigger.classList.remove('active');
      });
      tabContents.forEach(content => {
        content.classList.remove('active');
      });
      
      // Activate the selected tab
      const selectedTrigger = document.querySelector(`.tab-trigger[data-tab="${tabId}"]`);
      const selectedContent = document.getElementById(`${tabId}-tab`);
      
      if (selectedTrigger && !selectedTrigger.disabled) {
        selectedTrigger.classList.add('active');
        selectedContent.classList.add('active');
      }
    }
    
    tabTriggers.forEach(trigger => {
      trigger.addEventListener('click', () => {
        if (!trigger.disabled) {
          setActiveTab(trigger.dataset.tab);
        }
      });
    });
    
    // Button Navigation
    document.getElementById('get-started-btn').addEventListener('click', () => {
      setActiveTab('setup');
    });
    
    document.getElementById('setup-back-btn').addEventListener('click', () => {
      setActiveTab('welcome');
    });
    
    document.getElementById('setup-continue-btn').addEventListener('click', () => {
      const apiKey = document.getElementById('api-key').value;
      if (!apiKey) {
        showToast('API Key Required', 'Please enter your Gemini API key to continue', 'error');
        return;
      }
      setActiveTab('questionnaire');
    });
    
    document.getElementById('questionnaire-back-btn').addEventListener('click', () => {
      setActiveTab('setup');
    });
    
    document.getElementById('results-back-btn').addEventListener('click', () => {
      setActiveTab('questionnaire');
    });
    
    // Sliders
    function setupSlider(sliderId, valueId) {
      const slider = document.getElementById(sliderId);
      const valueDisplay = document.getElementById(valueId);
      const fill = slider.querySelector('.slider-fill');
      const thumb = slider.querySelector('.slider-thumb');
      let isDragging = false;
      
      function updateSlider(e) {
        const rect = slider.getBoundingClientRect();
        let x = e.clientX - rect.left;
        
        // Constrain x to the slider width
        x = Math.max(0, Math.min(x, rect.width));
        
        // Calculate percentage
        const percent = Math.round((x / rect.width) * 100);
        
        // Update UI
        fill.style.width = `${percent}%`;
        thumb.style.left = `${percent}%`;
        valueDisplay.textContent = percent;
        
        return percent;
      }
      
      slider.addEventListener('mousedown', (e) => {
        isDragging = true;
        updateSlider(e);
      });
      
      document.addEventListener('mousemove', (e) => {
        if (isDragging) {
          updateSlider(e);
        }
      });
      
      document.addEventListener('mouseup', () => {
        isDragging = false;
      });
      
      // For mobile
      slider.addEventListener('touchstart', (e) => {
        isDragging = true;
        updateSlider(e.touches[0]);
      });
      
      document.addEventListener('touchmove', (e) => {
        if (isDragging) {
          updateSlider(e.touches[0]);
        }
      });
      
      document.addEventListener('touchend', () => {
        isDragging = false;
      });
    }
    
    setupSlider('analytical-slider', 'analytical-value');
    setupSlider('teamwork-slider', 'teamwork-value');
    setupSlider('technical-slider', 'technical-value');
    
    // Toast System
    function showToast(title, message, type = 'success') {
      const toastContainer = document.getElementById('toast-container');
      const toastId = `toast-${Date.now()}`;
      
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.id = toastId;
      
      toast.innerHTML = `
        <div class="toast-icon">
          ${type === 'success' 
            ? '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><path d="m9 11 3 3L22 4"></path></svg>'
            : '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" x2="12" y1="8" y2="12"></line><line x1="12" x2="12.01" y1="16" y2="16"></line></svg>'
          }
        </div>
        <div class="toast-content">
          <div class="toast-title">${title}</div>
          <div class="toast-message">${message}</div>
        </div>
        <button class="toast-close" aria-label="Close toast">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
        </button>
      `;
      
      toastContainer.appendChild(toast);
      
      // Auto-remove after 5 seconds
      setTimeout(() => {
        toast.style.animation = 'slideOut 0.3s ease-out forwards';
        setTimeout(() => {
          toast.remove();
        }, 300);
      }, 5000);
      
      // Close button
      toast.querySelector('.toast-close').addEventListener('click', () => {
        toast.style.animation = 'slideOut 0.3s ease-out forwards';
        setTimeout(() => {
          toast.remove();
        }, 300);
      });
    }
    
    // Form Submission
    document.getElementById('submit-btn').addEventListener('click', async () => {
      const apiKey = document.getElementById('api-key').value;
      const skills = document.getElementById('skills').value;
      const interests = document.getElementById('interests').value;
      const academics = document.getElementById('academics').value;
      const analyticalSkill = document.getElementById('analytical-value').textContent;
      const teamworkSkill = document.getElementById('teamwork-value').textContent;
      const technicalSkill = document.getElementById('technical-value').textContent;
      
      // Validation
      if (!apiKey) {
        showToast('API Key Required', 'Please enter your Gemini API key to continue', 'error');
        setActiveTab('setup');
        return;
      }
      
      if (!skills || !interests || !academics) {
        showToast('Missing Information', 'Please fill out all fields in the questionnaire', 'error');
        return;
      }
      
      // Show loading state
      const submitBtn = document.getElementById('submit-btn');
      const originalBtnText = submitBtn.innerHTML;
      submitBtn.innerHTML = '<span class="spinner"></span> Analyzing Profile...';
      submitBtn.disabled = true;
      
      const progressContainer = document.getElementById('progress-container');
      const progressBar = document.getElementById('progress-bar');
      progressContainer.style.display = 'block';
      
      // Simulate progress
      let progress = 0;
      const progressInterval = setInterval(() => {
        progress += Math.random() * 10;
        if (progress >= 95) {
          progress = 95;
          clearInterval(progressInterval);
        }
        progressBar.style.width = `${progress}%`;
      }, 500);
      
      try {
        const enhancedSkills = `${skills}. Analytical skills: ${analyticalSkill}/100, Teamwork: ${teamworkSkill}/100, Technical aptitude: ${technicalSkill}/100`;
        
        // Call the Gemini API
        const suggestions = await generateCareerSuggestions(apiKey, enhancedSkills, interests, academics);
        
        // Render results
        renderResults(suggestions);
        
        // Enable results tab and switch to it
        document.querySelector('.tab-trigger[data-tab="results"]').disabled = false;
        setActiveTab('results');
        
        showToast('Career Suggestions Generated', 'We\'ve analyzed your profile and found some great career matches!');
      } catch (error) {
        console.error('Error:', error);
        
        const errorContainer = document.getElementById('error-container');
        errorContainer.innerHTML = `
          <div class="error-message">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" x2="12" y1="8" y2="12"></line>
              <line x1="12" x2="12.01" y1="16" y2="16"></line>
            </svg>
            <span>${error.message || 'Failed to generate career suggestions'}</span>
          </div>
        `;
        
        showToast('Error', error.message || 'Failed to generate career suggestions', 'error');
      } finally {
        // Reset loading state
        submitBtn.innerHTML = originalBtnText;
        submitBtn.disabled = false;
        progressContainer.style.display = 'none';
        clearInterval(progressInterval);
      }
    });
    
    // Generate Career Suggestions
    async function generateCareerSuggestions(apiKey, skills, interests, academics) {
      const prompt = `
        Analyze the following user profile:
        - Skills: ${skills}
        - Interests: ${interests}
        - Academic Strengths: ${academics}
        
        Recommend 5 technical career paths in engineering/tech with:
        1. Job role descriptions
        2. Required hard/soft skills
        3. Learning resources (free + paid)
        4. Salary trends (entry to senior level)
        
        Format the output in JSON as an array of objects with this structure:
        [
          {
            "role": "Job Title",
            "description": "Description of the role",
            "requiredSkills": {
              "hard": ["skill1", "skill2"],
              "soft": ["skill1", "skill2"]
            },
            "learningResources": {
              "free": ["resource1", "resource2"],
              "paid": ["resource1", "resource2"]
            },
            "salaryTrends": {
              "entry": "$X",
              "mid": "$Y",
              "senior": "$Z"
            }
          }
        ]
        
        Return ONLY the JSON with no additional text.
      `;
      
      try {
        const response = await fetch(
          `https://generativelanguage.googleapis.com/v1/models/gemini-1.5-pro:generateContent?key=${apiKey}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              contents: [
                {
                  parts: [
                    {
                      text: prompt,
                    },
                  ],
                },
              ],
              generationConfig: {
                temperature: 0.2,
                topK: 40,
                topP: 0.95,
                maxOutputTokens: 8192,
              },
            }),
          }
        );
        
        if (!response.ok) {
          const errorData = await response.json();
          throw new Error(errorData.error?.message || "Failed to generate career suggestions");
        }
        
        const data = await response.json();
        
        // Extract the text content from the response
        const textContent = data.candidates[0].content.parts[0].text;
        
        // Find the JSON part in the response (in case there's any extra text)
        const jsonMatch = textContent.match(/\[[\s\S]*\]/);
        
        if (!jsonMatch) {
          throw new Error("Failed to parse career suggestions from API response");
        }
        
        // Parse the JSON
        const suggestions = JSON.parse(jsonMatch[0]);
        
        return suggestions;
      } catch (error) {
        console.error("Error generating career suggestions:", error);
        throw error;
      }
    }
    
    // Render Results
    function renderResults(suggestions) {
        const resultsContainer = document.getElementById('results-container');
        resultsContainer.innerHTML = '';

        suggestions.forEach((suggestion, index) => {
            const resultCard = document.createElement('div');
            resultCard.className = 'card result-card';
            resultCard.dataset.role = suggestion.role;
            resultCard.style.animation = `fadeIn 0.3s ease-in-out ${index * 0.1}s both`;

            resultCard.innerHTML = `
                <div class="card-header result-header">
                <div class="card-title">${suggestion.role}</div>
                <div class="badge">Match #${index + 1}</div>
                </div>
                <div class="card-content result-content">
                <div class="result-section">
                <div class="result-section-title">Description</div>
                <p>${suggestion.description}</p>
                </div>

                <div style="display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                <div class="result-section">
                <div class="result-section-title">Required Skills</div>
                <div>
                <h5 style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">Hard Skills</h5>
                <div class="skill-tags">
                ${suggestion.requiredSkills.hard.map(skill => `
                    <span class="skill-tag skill-tag-hard">${skill}</span>
                    `).join('')}
                </div>
                </div>
                <div style="margin-top: 1rem;">
                <h5 style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">Soft Skills</h5>
                <div class="skill-tags">
                ${suggestion.requiredSkills.soft.map(skill => `
                    <span class="skill-tag skill-tag-soft">${skill}</span>
                    `).join('')}
                </div>
                </div>
                </div>

                <div class="result-section">
                <div class="result-section-title">Salary Trends</div>
                <div class="salary-grid">
                <div class="salary-card">
                <div class="salary-label">Entry Level</div>
                <div class="salary-value">${suggestion.salaryTrends.entry}</div>
                </div>
                <div class="salary-card">
                <div class="salary-label">Mid Level</div>
                <div class="salary-value">${suggestion.salaryTrends.mid}</div>
                </div>
                <div class="salary-card">
                <div class="salary-label">Senior Level</div>
                <div class="salary-value">${suggestion.salaryTrends.senior}</div>
                </div>
                </div>
                </div>
                </div>

                <div class="result-section">
                <div class="result-section-title">Learning Resources</div>
                <div class="resources-grid">
                <div class="resources-box">
                <div class="resources-title">Free Resources</div>
                <ul class="resources-list">
                ${suggestion.learningResources.free.map(resource => `
                    <li>${resource}</li>
                    `).join('')}
                </ul>
                </div>
                <div class="resources-box">
                <div class="resources-title">Paid Resources</div>
                <ul class="resources-list">
                ${suggestion.learningResources.paid.map(resource => `
                    <li>${resource}</li>
                    `).join('')}
                </ul>
                </div>
                </div>
                </div>
                </div>

                <!-- Expand indicator -->
                <div class="expand-indicator">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m6 9 6 6 6-6"/>
                </svg>
                </div>

                <!-- Learning Path Container (initially hidden) -->
                <div class="learning-path-container">
                <div class="learning-path-content">
                <!-- This will be populated when the card is expanded -->
                <div class="learning-path-loading">
                <div class="loading-spinner"></div>
                <div class="loading-text">Loading personalized learning path...</div>
                </div>
                </div>
                </div>
                `;

            resultsContainer.appendChild(resultCard);

            // Add click event to expand/collapse the card
            resultCard.addEventListener('click', function() {
                // Toggle expanded class
                const isExpanded = this.classList.toggle('expanded');

                if (isExpanded) {
                    // Get the API key from the input field when the card is clicked
                    const apiKey = document.getElementById('api-key').value;

                    // If this is the first time expanding, fetch the learning path
                    const learningPathContent = this.querySelector('.learning-path-content');
                    if (learningPathContent.querySelector('.learning-path-loading')) {
                        // Check if API key exists
                        if (!apiKey || apiKey.trim() === '') {
                            learningPathContent.innerHTML = `
                                <div class="learning-path-error">
                                <div class="error-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" x2="12" y1="8" y2="12"></line>
                                <line x1="12" x2="12.01" y1="16" y2="16"></line>
                                </svg>
                                </div>
                                <div class="error-message">Please enter your API key first</div>
                                <button class="btn btn-primary" onclick="document.getElementById('api-key').focus()">
                                Enter API Key
                                </button>
                                </div>
                                `;
                            return;
                        }

                        // Call fetchLearningPath with the API key
                        console.log("Fetching learning path for:", suggestion.role);
                        fetchLearningPath(apiKey, suggestion.role, learningPathContent);
                    }

                    // Close any other expanded cards
                    document.querySelectorAll('.result-card.expanded').forEach(card => {
                        if (card !== this) {
                            card.classList.remove('expanded');
                        }
                    });
                }
            });
        });
    }
    /**
     * Fetches a detailed learning path for a specific career role
     * @param {string} apiKey - The Gemini API key
     * @param {string} role - The career role to fetch a learning path for
     * @param {HTMLElement} container - The container to render the learning path in
     */
    async function fetchLearningPath(apiKey, role, container) {
      // Create the prompt for the learning path
      const prompt = `
        Create a detailed learning path for someone pursuing a career as a "${role}".
        
        Include the following sections:
        1. A progress tracker with 5-7 key milestones
        2. Step-by-step guidance with 4-6 learning steps
        3. For each step, include:
           - Step name and description
           - Status (completed, in-progress, or pending)
           - Required skills to learn
           - Free and paid resources (courses, books, certifications)
        4. Career milestones (2-4 key achievements to aim for)
        
        Format the output in JSON with this structure:
        {
          "progressPercentage": 30,
          "totalSteps": 6,
          "completedSteps": 2,
          "steps": [
            {
              "title": "Step Title",
              "description": "Step description",
              "status": "completed|in-progress|pending",
              "resources": {
                "free": [
                  {"name": "Resource Name", "url": "https://example.com", "type": "course|book|tutorial|certification"}
                ],
                "paid": [
                  {"name": "Resource Name", "url": "https://example.com", "type": "course|book|tutorial|certification", "price": "$XX"}
                ]
              }
            }
          ],
          "milestones": [
            {
              "title": "Milestone Title",
              "description": "Description of this career milestone"
            }
          ]
        }
        
        Return ONLY the JSON with no additional text.
      `;
      
      try {
        // Show loading state
        container.innerHTML = `
          <div class="learning-path-loading">
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading personalized learning path...</div>
          </div>
        `;
        
        // Call the Gemini API
        const response = await fetch(
          `https://generativelanguage.googleapis.com/v1/models/gemini-1.5-pro:generateContent?key=${apiKey}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              contents: [
                {
                  parts: [
                    {
                      text: prompt,
                    },
                  ],
                },
              ],
              generationConfig: {
                temperature: 0.2,
                topK: 40,
                topP: 0.95,
                maxOutputTokens: 8192,
              },
            }),
          }
        );
        
        if (!response.ok) {
          const errorData = await response.json();
          console.error("API Error:", errorData);
          throw new Error(errorData.error?.message || "Failed to generate learning path");
        }
        
        const data = await response.json();
        console.log("API Response:", data); // Debug log
        
        // Extract the text content from the response
        const textContent = data.candidates[0].content.parts[0].text;
        console.log("Text Content:", textContent); // Debug log
        
        // Find the JSON part in the response (in case there's any extra text)
        const jsonMatch = textContent.match(/\{[\s\S]*\}/);
        
        if (!jsonMatch) {
          console.error("No JSON found in response:", textContent);
          throw new Error("Failed to parse learning path from API response");
        }
        
        try {
          // Parse the JSON
          const jsonString = jsonMatch[0];
          console.log("JSON String:", jsonString); // Debug log
          const learningPath = JSON.parse(jsonString);
          console.log("Parsed Learning Path:", learningPath); // Debug log
          
          // Render the learning path
          renderLearningPath(learningPath, role, container);
        } catch (jsonError) {
          console.error("JSON Parse Error:", jsonError, "Raw JSON:", jsonMatch[0]);
          throw new Error("Failed to parse learning path JSON: " + jsonError.message);
        }
        
      } catch (error) {
        console.error("Error generating learning path:", error);
        
        // Show error state
        container.innerHTML = `
          <div class="learning-path-error">
            <div class="error-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" x2="12" y1="8" y2="12"></line>
                <line x1="12" x2="12.01" y1="16" y2="16"></line>
              </svg>
            </div>
            <div class="error-message">Failed to load learning path: ${error.message}</div>
            <button class="btn btn-outline" onclick="retryFetchLearningPath('${role}', this.parentNode.parentNode)">
              Try Again
            </button>
            <button class="btn btn-primary" onclick="useFallbackLearningPath('${role}', this.parentNode.parentNode)" style="margin-top: 1rem;">
              Use Sample Path
            </button>
          </div>
        `;
      }
    }
    
    /**
     * Provides a fallback learning path when the API call fails
     * @param {string} role - The career role
     * @param {HTMLElement} container - The container to render the learning path in
     */
    function useFallbackLearningPath(role, container) {
      // Create a sample learning path based on the role
      const fallbackPath = {
        progressPercentage: 30,
        totalSteps: 5,
        completedSteps: 1,
        steps: [
          {
            title: "Learn Fundamentals",
            description: `Master the core concepts and foundational knowledge required for a career in ${role}.`,
            status: "completed",
            resources: {
              free: [
                {name: "Introduction to the Field", url: "https://www.coursera.org", type: "course"},
                {name: "Beginner's Guide", url: "https://www.freecodecamp.org", type: "tutorial"}
              ],
              paid: [
                {name: "Comprehensive Course", url: "https://www.udemy.com", type: "course", price: "$59.99"},
                {name: "Essential Textbook", url: "https://www.amazon.com", type: "book", price: "$49.99"}
              ]
            }
          },
          {
            title: "Build Technical Skills",
            description: `Develop the specific technical abilities needed to excel as a ${role}.`,
            status: "in-progress",
            resources: {
              free: [
                {name: "Practical Tutorials", url: "https://www.youtube.com", type: "tutorial"},
                {name: "Open Source Projects", url: "https://github.com", type: "tutorial"}
              ],
              paid: [
                {name: "Advanced Masterclass", url: "https://www.pluralsight.com", type: "course", price: "$29/month"},
                {name: "Industry Certification", url: "https://www.certification.com", type: "certification", price: "$299"}
              ]
            }
          },
          {
            title: "Gain Practical Experience",
            description: "Apply your knowledge through projects, internships, or entry-level positions.",
            status: "pending",
            resources: {
              free: [
                {name: "Project Ideas", url: "https://www.github.com", type: "tutorial"},
                {name: "Community Forums", url: "https://www.reddit.com", type: "tutorial"}
              ],
              paid: [
                {name: "Mentorship Program", url: "https://www.mentorship.com", type: "course", price: "$99/month"},
                {name: "Industry Conference", url: "https://www.conference.com", type: "certification", price: "$499"}
              ]
            }
          },
          {
            title: "Specialize in a Niche",
            description: `Focus on a specialized area within the ${role} field to stand out.`,
            status: "pending",
            resources: {
              free: [
                {name: "Specialization Guide", url: "https://medium.com", type: "tutorial"},
                {name: "Expert Blogs", url: "https://www.blogs.com", type: "tutorial"}
              ],
              paid: [
                {name: "Specialized Course", url: "https://www.masterclass.com", type: "course", price: "$180"},
                {name: "Advanced Certification", url: "https://www.advancedcert.com", type: "certification", price: "$399"}
              ]
            }
          },
          {
            title: "Network and Build Reputation",
            description: "Establish your professional presence and connect with industry peers.",
            status: "pending",
            resources: {
              free: [
                {name: "LinkedIn Networking", url: "https://www.linkedin.com", type: "tutorial"},
                {name: "Industry Meetups", url: "https://www.meetup.com", type: "tutorial"}
              ],
              paid: [
                {name: "Personal Branding Course", url: "https://www.personalbranding.com", type: "course", price: "$149"},
                {name: "Premium Industry Events", url: "https://www.industryevents.com", type: "certification", price: "$299"}
              ]
            }
          }
        ],
        milestones: [
          {
            title: "Entry-Level Position",
            description: `Secure your first role as a junior ${role} to begin applying your skills in a professional environment.`
          },
          {
            title: "Mid-Level Expertise",
            description: "Develop specialized knowledge and take on more complex responsibilities."
          },
          {
            title: "Senior-Level Leadership",
            description: "Lead projects and teams, mentor juniors, and shape strategic direction."
          },
          {
            title: "Industry Recognition",
            description: "Become known for your expertise through speaking, publishing, or innovative contributions."
          }
        ]
      };
      
      // Render the fallback learning path
      renderLearningPath(fallbackPath, role, container);
      
      // Show a toast notification
      showToast('Sample Path Loaded', 'We\'ve loaded a sample learning path as a demonstration.', 'success');
    }
    
    /**
     * Renders a learning path in the specified container
     * @param {Object} learningPath - The learning path data
     * @param {string} role - The career role
     * @param {HTMLElement} container - The container to render in
     */
    function renderLearningPath(learningPath, role, container) {
      // Create the HTML for the learning path
      const html = `
        <div class="learning-path-header">
          <div class="learning-path-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
              <path d="M6 12v5c3 3 9 3 12 0v-5"></path>
            </svg>
            Learning Path: ${role}
          </div>
        </div>
        
        <!-- Progress Tracker -->
        <div class="progress-tracker">
          <div class="progress-tracker-header">
            <div class="progress-tracker-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 20v-6"></path>
                <path d="M18 20V10"></path>
                <path d="M6 20v-3"></path>
              </svg>
              Your Progress
            </div>
            <div class="progress-percentage">${learningPath.progressPercentage}%</div>
          </div>
          <div class="progress-bar-container">
            <div class="progress-bar-fill" style="width: ${learningPath.progressPercentage}%"></div>
          </div>
          <div class="progress-stats">
            <span>${learningPath.completedSteps} of ${learningPath.totalSteps} steps completed</span>
            <span>${learningPath.progressPercentage}% complete</span>
          </div>
        </div>
        
        <!-- Learning Path Steps -->
        <div class="learning-path-steps">
          <h3 class="result-section-title">Step-by-Step Guidance</h3>
          <div class="step-list">
            ${learningPath.steps.map((step, index) => `
              <div class="step-item ${step.status}">
                <div class="step-marker"></div>
                <div class="step-content">
                  <div class="step-header">
                    <div class="step-title">Step ${index + 1}: ${step.title}</div>
                    <div class="step-status ${step.status}">
                      ${step.status === 'completed' ? 'Completed' : 
                        step.status === 'in-progress' ? 'In Progress' : 'Pending'}
                    </div>
                  </div>
                  <div class="step-description">${step.description}</div>
                  <div class="step-resources">
                    <div style="font-weight: 500; margin-bottom: 0.5rem;">Resources:</div>
                    <div class="resource-list">
                      ${step.resources.free.map(resource => `
                        <div class="resource-item">
                          <div class="resource-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                              ${getResourceIcon(resource.type)}
                            </svg>
                          </div>
                          <div>
                            <a href="${resource.url}" target="_blank" class="resource-link">${resource.name}</a>
                            <span class="resource-tag free">Free</span>
                          </div>
                        </div>
                      `).join('')}
                      
                      ${step.resources.paid.map(resource => `
                        <div class="resource-item">
                          <div class="resource-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                              ${getResourceIcon(resource.type)}
                            </svg>
                          </div>
                          <div>
                            <a href="${resource.url}" target="_blank" class="resource-link">${resource.name}</a>
                            <span class="resource-tag paid">${resource.price || 'Paid'}</span>
                          </div>
                        </div>
                      `).join('')}
                    </div>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
        
        <!-- Career Milestones -->
        <div class="milestones-section">
          <h3 class="result-section-title">Career Milestones</h3>
          <div class="milestone-grid">
            ${learningPath.milestones.map(milestone => `
              <div class="milestone-card">
                <div class="milestone-title">${milestone.title}</div>
                <div class="milestone-description">${milestone.description}</div>
              </div>
            `).join('')}
          </div>
        </div>
      `;
      
      // Update the container with the learning path HTML
      container.innerHTML = html;
      
      // Helper function to get the appropriate icon for a resource type
      function getResourceIcon(type) {
        switch (type) {
          case 'course':
            return '<path d="M22 10v6M2 10l10-5 10 5-10 5z"></path><path d="M6 12v5c3 3 9 3 12 0v-5"></path>';
          case 'book':
            return '<path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"></path>';
          case 'tutorial':
            return '<rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect><line x1="3" x2="21" y1="9" y2="9"></line><line x1="9" x2="9" y1="21" y2="9"></line>';
          case 'certification':
            return '<circle cx="12" cy="8" r="6"></circle><path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"></path>';
          default:
            return '<path d="M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5"></path><path d="M8.5 8.5v.01"></path><path d="M16 15.5v.01"></path><path d="M12 12v.01"></path><path d="M11 17v.01"></path><path d="M7 14v.01"></path>';
        }
      }
    }
    
    // Function to retry fetching a learning path
    window.retryFetchLearningPath = function(role, container) {
      fetchLearningPath(document.getElementById('api-key').value, role, container);
    };
    
    // Save Results
    document.getElementById('save-results-btn').addEventListener('click', () => {
      window.print();
    });
    
    // Set current year in footer
    document.getElementById('current-year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
